name: Build Seven Secular Sermons PDF
on: 
  push:
    branches:
      - main
      - dev
    tags:
      - '**'
jobs:
  build_latex:
    runs-on: ubuntu-latest
    steps:
      - name: Clone repo
        uses: actions/checkout@v4
      - name: Compile document
        uses: xu-cheng/latex-action@v4
        with:
          root_file: |
            tex/s3_en.tex
            tex/s3_de.tex
            tex/s3_en_de.tex
          latexmk_use_lualatex: true
          latexmk_shell_escape: true
          extra_system_packages: "lilypond inkscape jinja2-cli"
      - name: Upload PDF
        uses: actions/upload-artifact@v4
        with:
          path: |
            s3_en.pdf
            s3_de.pdf
            s3_en_de.pdf
          retention-days: 8
          overwrite: true

# vim: set et ai sw=2 ts=2 sts=2:

